@model TourismManagementSystem.Models.ViewModels.PackageCreateVm
@{
    ViewBag.Title = "Edit Package";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- Header Start -->
<div class="container-fluid bg-breadcrumb">
    <div class="container text-center py-5" style="max-width: 900px;">
        <h3 class="text-white display-3 mb-4">
            Edit Packages
        </h3>
        <ol class="breadcrumb justify-content-center mb-0">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Home</a></li>
            @*<li class="breadcrumb-item"><a href="#">Pages</a></li>*@
        <li class="breadcrumb-item active text-white">Edit Packages</li>
        </ol>
    </div>
</div>
<!-- Header End -->
<div class="container py-4" style="max-width:900px;">
    <h3 class="mb-3">Edit Package</h3>

    @using (Html.BeginForm("Edit", "Package", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div class="mb-3">
            @Html.LabelFor(m => m.Title)
            @Html.TextBoxFor(m => m.Title, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Title, "", new { @class = "text-danger" })
        </div>

        <div class="mb-3">
            @Html.LabelFor(m => m.Description)
            @Html.TextAreaFor(m => m.Description, 6, 60, new { @class = "form-control" })
        </div>

        <div class="row">
            <div class="col-md-4 mb-3">
                @Html.LabelFor(m => m.Price)
                @Html.TextBoxFor(m => m.Price, new { @class = "form-control", type = "number", min = "0", step = "0.01" })
            </div>
            <div class="col-md-4 mb-3">
                @Html.LabelFor(m => m.DurationDays)
                @Html.TextBoxFor(m => m.DurationDays, new { @class = "form-control", type = "number", min = "1", max = "100" })
            </div>
            <div class="col-md-4 mb-3">
                @Html.LabelFor(m => m.MaxGroupSize)
                @Html.TextBoxFor(m => m.MaxGroupSize, new { @class = "form-control", type = "number", min = "1", max = "1000" })
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                @Html.LabelFor(m => m.StartDate)
                @Html.TextBoxFor(m => m.StartDate, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date" })
            </div>
            <div class="col-md-6 mb-3">
                @Html.LabelFor(m => m.EndDate)
                @Html.TextBoxFor(m => m.EndDate, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date" })
            </div>
        </div>

        <!-- IMAGE UPLOAD -->
        <div class="mb-3">
            <label>Upload New Images</label>
            <input type="file" name="Images" multiple class="form-control" />
        </div>

        <!-- EXISTING IMAGES -->
        if (Model.ExistingImages != null && Model.ExistingImages.Any())
        {
            <div class="mb-3">
                <label>Existing Images</label>
                <div class="row">
                    @foreach (var img in Model.ExistingImages)
                    {
                        <div class="col-md-3 mb-2 text-center">
                            <img src="@Url.Content(img.ImagePath)" class="img-thumbnail" style="height:100px;" />
                            <div class="form-check">
                                <input type="checkbox" name="removeImageIds" value="@img.ImageId" class="form-check-input" />
                                <label class="form-check-label">Remove</label>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        <div class="mt-3">
            <button type="submit" class="btn btn-primary me-2">
                <i class="fas fa-save me-1"></i> Save Changes
            </button>
            <a href="@Url.Action("Index","Package")" class="btn btn-outline-secondary">Back to My Packages</a>
        </div>
    }
</div>
