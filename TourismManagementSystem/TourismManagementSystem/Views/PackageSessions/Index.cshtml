@model IEnumerable<TourismManagementSystem.Models.Session>
@{
    var pkg = ViewBag.Package as TourismManagementSystem.Models.TourPackage;
    ViewBag.Title = "Sessions — " + (pkg?.Title ?? "");
}
<!-- Header Start -->
<div class="container-fluid bg-breadcrumb">
    <div class="container text-center py-5" style="max-width: 900px;">
        <h3 class="text-white display-3 mb-4">
            Session
        </h3>
        <ol class="breadcrumb justify-content-center mb-0">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Home</a></li>
            @*<li class="breadcrumb-item"><a href="#">Pages</a></li>*@
            <li class="breadcrumb-item active text-white">Session</li>
        </ol>
    </div>
</div>
<!-- Header End -->
<div class="container mt-4">
    <h2>Sessions for: @pkg.Title</h2>

    @if (TempData["Success"] != null)
    {<div class="alert alert-success">@TempData["Success"]</div>}

    <div class="mb-3">
        <a class="btn btn-primary" href="@Url.Action("Create", "PackageSessions", new { packageId = pkg.PackageId })">Add Session</a>
        <a class="btn btn-secondary" href="@Url.Action("Index", "Package")">Back to My Packages</a>
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-info">No sessions yet. Click “Add Session”.</div>
    }
    else
    {
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Start</th>
                    <th>End</th>
                    <th>Capacity</th>
                    <th>Status</th>
                    <th style="width:160px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var s in Model)
                {
                    <tr>
                        <td>@s.StartDate.ToString("yyyy-MM-dd")</td>
                        <td>@s.EndDate.ToString("yyyy-MM-dd")</td>
                        <td>@s.Capacity</td>
                        <td>
                            @if (s.IsCanceled)
                            {<span class="badge bg-danger">Canceled</span> }
                            else if (s.StartDate.Date >= DateTime.Today)
                            { <span class="badge bg-success">Upcoming</span> }
                            else
                            { <span class="badge bg-secondary">Past</span>}
                        </td>
                        <td>
                            <a class="btn btn-sm btn-outline-primary"
                               href='@Url.Action("Edit", "PackageSessions", new { packageId = s.PackageId, id = s.SessionId })'>Edit</a>
                            <a class="btn btn-sm btn-outline-danger"
                               href='@Url.Action("Delete", "PackageSessions", new { packageId = s.PackageId, id = s.SessionId })'>Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
